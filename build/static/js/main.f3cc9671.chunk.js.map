{"version":3,"sources":["store/notifications/index.js","helpers/request.js","store/auth/index.js","constants/routes.js","components/common/PrivateRoute.jsx","components/common/ButtonLink.jsx","components/App/AppHeader.jsx","components/common/AuthFormInput.jsx","components/common/PasswordInput.jsx","components/Auth/LoginForm.jsx","components/Auth/RegistrationForm.jsx","components/Auth/LogoutForm.jsx","components/Auth/Auth.jsx","store/news/index.js","components/News/NewsListCard.jsx","components/News/NewsList.jsx","components/News/NewsAdd.jsx","components/News/News.jsx","store/chat/index.js","components/Chat/ChatChannelList.jsx","components/Chat/ChatActiveChatArea.jsx","components/Chat/Chat.jsx","components/Profile/Profile.jsx","store/adminPanel/index.js","components/AdminPanel/AdminPanelSettingsFormGroup.jsx","components/AdminPanel/AdminPanel.jsx","components/common/withNotificationsHOC.jsx","components/App/App.jsx","theme.js","store/index.js","index.js"],"names":["_createActions","createActions","OPEN_NOTIFICATION","n","CLOSE_NOTIFICATION","prefix","openNotification","closeNotification","notificationsSelector","state","notifications","handleActions","_handleActions","_defineProperty","action","_action$payload","payload","text","variant","concat","_toConsumableArray","id","length","isActive","withoutDeletedNotification","filter","notification","map","not","i","instance","axios","create","baseURL","waitQueue","isRefreshDispatched","request","_ref","url","method","data","_ref$headers","headers","isRefresh","isWithoutToken","_ref$getState","getState","_ref$dispatch","dispatch","Promise","resolve","reject","_tokensSelector","tokensSelector","accessToken","accessTokenExpiredAt","refreshTokenExpiredAt","requestFunc","_ref2","_tokensSelector2","refreshToken","then","response","catch","error","message","status","errorResponse","console","group","info","dir","groupEnd","logout","detail","isTokenExpired","Date","now","isRefreshExpired","push","refreshTokenRequest","forEach","config","userProfileSelector","auth","userProfile","userPermissionsSelector","permissions","tokens","isAuthorizedSelector","isLoadingUserProfileSelector","isLoadingUserProfile","actionsPrefix","setProfileData","createAction","setTokenData","logoutUser","setIsLoadingUserProfile","_","_handleActions2","image","middleName","surName","username","firstName","defaultPermissions","chat","C","D","R","U","news","settings","_handleActions3","permission","_handleActions4","_action$payload2","combineReducers","getUserProfileFromToken","tokenData","localStorage","getItem","JSON","parse","removeItem","saveProfile","_ref3","oldPassword","newPassword","avatar","FormData","append","finally","connect","isAuthorized","permissionPath","path","component","get","_jsx","Redirect","from","to","routes","Route","AdapterLink","React","forwardRef","props","ref","Link","_objectSpread","innerRef","ButtonLink","withRouter","location","children","isRouterLink","_ref$color","color","Button","pathname","AppHeader","_PureComponent","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","_this$props","this","profile","_jsxs","_Fragment","_get","_this$props2","classes","AppBar","position","className","appBar","Container","Toolbar","logo","src","alt","renderAuthorizedNav","PureComponent","compose","withStyles","flexGrow","AuthFormInput","theme","textField","display","marginBottom","spacing","handleChange","label","required","FormControl","InputLabel","htmlFor","Input","type","autoComplete","onChange","startAdornment","InputAdornment","Person","PasswordInput","name","_React$useState","useState","showPassword","_React$useState2","_slicedToArray","values","setValues","classNames","Https","endAdornment","IconButton","onClick","onMouseDown","event","preventDefault","Visibility","VisibilityOff","form","flexDirection","padding","maxWidth","textCenter","textAlign","_useState","password","_useState2","target","Paper","onSubmit","setItem","stringify","loginUser","Typography","history","repeatPassword","firstname","lastname","patronicname","registerUser","Auth","wrapper","gutterBottom","LogoutForm","exact","LoginForm","RegistrationForm","background","backgroundPosition","backgroundSize","width","flex","paddingTop","isLoadingNewsListSelector","isLoadingNewsList","isLoadingNewsFormSelector","isLoadingNewsForm","isLoadedSelector","isLoaded","newsListSelector","setIsLoadingNewsList","setIsLoadingNewsForm","setNewsList","appendNews","setToZeroNewsList","createNews","title","updateNews","styles","card","NewsListCard","post","isUpdateAllowed","isDeleteAllowed","Card","CardHeader","Avatar","user","subheader","created_at","CardContent","CardActions","deleteNews","NewsList","log","isLoading","isCreateAllowed","NewsAdd","_this","_len","args","Array","_key","call","createdAt","_event$target","setState","handleSubmit","_this$state","match","params","newsList","_newsList$find","find","_this$state2","formCard","Grid","container","item","xs","TextField","margin","disabled","fullWidth","multiline","rows","ButtonGroup","News","socket","chatUsersSelector","users","chatMessagesList","messages","chatSelectedRoomSelector","selectedRoom","chatMessageText","messageText","setUsers","addUser","updateUser","removeUser","appendMessage","setRoomHistory","setToZeroMessages","setSelectedRoom","setMessageText","resetMessage","userId","socketId","sendMessage","emit","senderId","recipientId","roomId","column","height","selectRoom","connectRoom","square","Divider","List","index","ListItem","button","selected","ListItemText","primary","ActiveChannelArea","chatArea","direction","wrap","messageContainer","isMyMessage","isAnotherMessage","messagePrimary","messageSecondary","style","InputLabelProps","shrink","backgroundColor","palette","grey","A700","secondary","main","alignSelf","overflowY","alignItems","Chat","socketIO","on","disconnect","ChatChannelsList","ChatActiveChatArea","empty","toolbar","mixins","Profile","confirmPassword","fileRef","createRef","cancelHandler","handleChangeFile","reader","FileReader","onload","e","result","current","files","readAsDataURL","submitHandler","AspectRatio","avatarPreviewWrapper","avatarPreview","uploadButton","formActions","borderRadius","flexWrap","marginLeft","marginRight","marginTop","isLoadingUsersSelector","adminPanel","isLoadingUsers","usersSelector","setIsLoadingUsers","setIsLoadingForm","setToZeroUsers","isLoadingForm","getUsers","updateUserPermission","deleteUser","SettingsFormGroup","FormGroup","FormControlLabel","control","Checkbox","checked","defaultState","selectedUserId","selectedUser","AdminPanel","part","partRule","handleChangeUser","_cloneDeep","u","deleteHandler","mb3","userAvatar","userSelect","Select","MenuItem","renderForms","justify","variantIcon","success","CheckCircleIcon","warning","WarningIcon","ErrorIcon","InfoIcon","useStyles1","makeStyles","green","dark","amber","icon","fontSize","iconVariant","opacity","MySnackbarContentWrapper","onClose","other","_objectWithoutProperties","_excluded","Icon","SnackbarContent","clsx","CloseIcon","WrappedComponent","mapDispatchToProps","_excluded2","handleClose","notificationId","reason","currentNotification","Snackbar","anchorOrigin","vertical","horizontal","open","autoHideDuration","root","minHeight","mainLayoutWrapper","MainLayout","withLayoutAndNotifications","Component","withNotifications","withLayout","App","Box","Switch","PrivateRoute","createMuiTheme","red","A400","default","rootReducer","createAppStore","createStore","applyMiddleware","thunk","window","__REDUX_DEVTOOLS_EXTENSION__","noop","ReactDOM","render","ThemeProvider","CssBaseline","Provider","store","BrowserRouter","document","getElementById"],"mappings":"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","file":"static/js/main.f3cc9671.chunk.js","sourcesContent":["import { createActions, handleActions } from 'redux-actions';\n\nexport const { openNotification, closeNotification } = createActions(\n  {\n    OPEN_NOTIFICATION: n => n,\n    CLOSE_NOTIFICATION: n => n\n  },\n  { prefix: 'notifications' }\n);\n\nexport const notificationsSelector = state => state.notifications;\n\nconst notifications = handleActions(\n  {\n    [openNotification]: (state, action) => {\n      const { text, variant } = action.payload;\n      return [\n        ...state,\n        { text, variant, id: state.length + 1, isActive: !state.length }\n      ];\n    },\n    [closeNotification]: (state, action) => {\n      const withoutDeletedNotification = state.filter(\n        notification => notification.id !== action.payload\n      );\n      return withoutDeletedNotification.length\n        ? withoutDeletedNotification.map((not, i) => {\n            if (i === withoutDeletedNotification.length - 1) {\n              not.isActive = true;\n            }\n            return not;\n          })\n        : withoutDeletedNotification;\n    }\n  },\n  []\n);\n\nexport default notifications;\n","import axios from 'axios';\nimport { tokensSelector, refreshTokenRequest, logout } from '../store/auth';\nimport { openNotification } from '../store/notifications';\nconst baseURL = 'http://localhost:3000/api/';\nconst instance = axios.create({ baseURL });\n\nconst waitQueue = [];\nlet isRefreshDispatched = false;\n\nconst request = ({\n  url,\n  method,\n  data,\n  headers = {},\n  isRefresh,\n  isWithoutToken,\n  getState = () => ({}),\n  dispatch = () => {}\n}) =>\n  new Promise((resolve, reject) => {\n    \n    const {\n      accessToken,\n      accessTokenExpiredAt,\n      refreshTokenExpiredAt\n    } = tokensSelector(getState());\n\n    // request handler\n    const requestFunc = ({ url, method, headers, data, resolve, reject }) => {\n      if (!isWithoutToken) {\n        const {\n          accessToken,\n          refreshToken,\n        } = tokensSelector(getState());\n        (headers['Authorization'] = isRefresh ? refreshToken : accessToken);\n      }\n\n      return instance({ url, method, headers, data })\n        .then(response => {\n          resolve(response.data);\n        })\n        .catch(error => {\n          if (error.response) {\n            const status = error.response.status || 404;\n            const errorResponse = error.response.data;\n            console.group('Error from: ' + url);\n            console.info('Status: ' + status);\n            console.dir(errorResponse);\n            console.groupEnd();\n\n            switch (status) {\n              case 401:\n              case 403:\n                dispatch(logout())\n                return reject(errorResponse);\n              case 500:\n              case 502:\n              case 503:\n                dispatch(\n                  openNotification({\n                    variant: 'error',\n                    text: `${status}!\\nSomething is wrong))`\n                  })\n                );\n                return reject({ detail: 'Unknown error' });\n              default:\n                return reject(errorResponse);\n            }\n          } else {\n            dispatch(\n              openNotification({\n                variant: 'error',\n                text: `Error!!\\n${error.message}`\n              })\n            );\n            return reject(error.message);\n          }\n        });\n    };\n\n    const isTokenExpired = accessTokenExpiredAt <= Date.now();\n    const isRefreshExpired = refreshTokenExpiredAt <= Date.now();\n\n    // If should refresh token\n    if (accessToken && isTokenExpired && !isRefreshExpired && !isWithoutToken) {\n      // push original request to waiting stack\n      !isRefresh &&\n        waitQueue.push({\n          url,\n          method,\n          data,\n          headers,\n          isRefresh,\n          resolve,\n          reject\n        });\n\n      // dispatch refresh token (first-time only!)\n      if (!isRefresh && !isRefreshDispatched) {\n        isRefreshDispatched = true;\n        dispatch(refreshTokenRequest())\n          .then(() => {\n            isRefreshDispatched = false;\n            // and after refresh - execute requests from waiting stack\n            waitQueue.forEach(config => requestFunc(config));\n          })\n          .catch(() => {\n            // by default in error - logout user\n            dispatch(logout())\n            // eslint-disable-next-line\n            reject({ detail: 'Refresh token error' });\n          });\n      } else if (isRefresh) {\n        // if has been called refresh method\n        requestFunc({ url, method, data, headers, resolve, reject });\n      }\n    } else if (isRefreshExpired && !isWithoutToken) {\n      // if refresh is expired - just logout\n      dispatch(logout())\n      // eslint-disable-next-line\n      reject({ detail: 'Refresh token is expired' });\n    } else {\n      // by default\n      requestFunc({ url, method, data, headers, resolve, reject });\n    }\n  });\n\nexport default request;\n","import { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport request from '../../helpers/request';\nimport { openNotification } from '../notifications';\nexport const userProfileSelector = state => state.auth.userProfile;\nexport const userPermissionsSelector = state => state.auth.permissions;\nexport const tokensSelector = state => state.auth.tokens;\nexport const isAuthorizedSelector = state => !!state.auth.tokens.accessToken;\nexport const isLoadingUserProfileSelector = state => state.auth.isLoadingUserProfile;\n\nconst actionsPrefix = 'AUTH';\nexport const loginUserRequest = createAction(`${actionsPrefix}/LOGIN_USER_REQUEST`);\nexport const registrationUserRequest = createAction(`${actionsPrefix}/REGISTRATION_USER_REQUEST`);\nexport const setProfileData = createAction(`${actionsPrefix}/SET_PROFILE_DATA`);\nexport const setTokenData = createAction(`${actionsPrefix}/SET_TOKEN_DATA`);\nexport const logoutUser = createAction(`${actionsPrefix}/LOGOUT_USER`);\nexport const setIsLoadingUserProfile = createAction(`${actionsPrefix}/SET_IS_LOADING_USER_PROFILE`);\n\nconst isLoadingUserProfile = handleActions(\n  {\n    [setIsLoadingUserProfile]: (_, action) => action.payload\n  },\n  false\n);\n\nconst userProfile = handleActions(\n  {\n    [setProfileData]: (state, action) => {\n      const { id, image, middleName, surName, username, firstName } = action.payload;\n      return { id, image, firstName, middleName, surName, username };\n    },\n    [logoutUser]: () => null\n  },\n  null\n);\nconst defaultPermissions = {\n  chat: { C: false, D: false, R: false, U: false },\n  news: { C: false, D: false, R: false, U: false },\n  settings: { C: false, D: false, R: false, U: false }\n};\nconst permissions = handleActions(\n  {\n    [setProfileData]: (state, action) => {\n      const { permission } = action.payload;\n      return permission;\n    },\n    [logoutUser]: () => defaultPermissions\n  },\n  defaultPermissions\n);\n\nconst tokens = handleActions(\n  {\n    [setTokenData]: (state, action) => {\n      const {\n        accessToken,\n        accessTokenExpiredAt,\n        refreshToken,\n        refreshTokenExpiredAt\n      } = action.payload;\n      return {\n        accessToken,\n        accessTokenExpiredAt,\n        refreshToken,\n        refreshTokenExpiredAt\n      };\n    },\n    [logoutUser]: () => ({\n      accessToken: null,\n      accessTokenExpiredAt: null,\n      refreshToken: null,\n      refreshTokenExpiredAt: null\n    })\n  },\n  {\n    accessToken: null,\n    accessTokenExpiredAt: null,\n    refreshToken: null,\n    refreshTokenExpiredAt: null\n  }\n);\n\nexport default combineReducers({\n  userProfile,\n  permissions,\n  tokens,\n  isLoadingUserProfile\n});\n\nexport const loginUser = ({ username, password }) => (dispatch, getState) =>\n  new Promise((resolve, reject) => {\n    const data = {\n      username,\n      password\n    };\n    request({\n      url: '/login',\n      method: 'POST',\n      data,\n      isWithoutToken: true,\n      dispatch,\n      getState\n    })\n      .then(data => {\n        dispatch(openNotification({ text: '  !', variant: 'success' }));\n        const { accessToken, accessTokenExpiredAt, refreshToken, refreshTokenExpiredAt } = data;\n        localStorage.setItem(\n          'token-data',\n          JSON.stringify({\n            accessToken,\n            accessTokenExpiredAt,\n            refreshToken,\n            refreshTokenExpiredAt\n          })\n        );\n        dispatch(setProfileData(data));\n        dispatch(setTokenData(data));\n        resolve(data);\n      })\n      .catch(error => {\n        dispatch(\n          openNotification({\n            text: error.message,\n            variant: 'error'\n          })\n        );\n        reject(error);\n      });\n  });\n\nexport const registerUser = ({ username, password, firstname, lastname, patronicname }) => (\n  dispatch,\n  getState\n) =>\n  new Promise((resolve, reject) => {\n    const data = {\n      username,\n      surName: lastname,\n      firstName: firstname,\n      middleName: patronicname,\n      password\n    };\n    request({\n      url: '/registration',\n      data,\n      method: 'POST',\n      isWithoutToken: true,\n      dispatch,\n      getState\n    })\n      .then(() => {\n        dispatch(\n          openNotification({\n            text: '  !',\n            variant: 'success'\n          })\n        );\n        resolve(data);\n      })\n      .catch(error => {\n        dispatch(\n          openNotification({\n            text: error.message,\n            variant: 'error'\n          })\n        );\n        reject(error);\n      });\n  });\n\nexport const getUserProfileFromToken = () => (dispatch, getState) => {\n  const tokenData = localStorage.getItem('token-data');\n  if (!tokenData) return;\n  dispatch(setTokenData(JSON.parse(tokenData)));\n  request({ url: '/profile', method: 'GET', dispatch, getState })\n    .then(data => {\n      dispatch(setProfileData(data));\n    })\n    .catch(error => {});\n};\n\nexport const refreshTokenRequest = () => (dispatch, getState) =>\n  new Promise((resolve, reject) => {\n    request({ url: '/refresh-token', method: 'POST', isRefresh: true, dispatch, getState })\n      .then(data => {\n        dispatch(setTokenData(data));\n        resolve(resolve);\n      })\n      .catch(error => reject(error));\n  });\n\nexport const logout = () => dispatch => {\n  localStorage.removeItem('token-data');\n  dispatch(logoutUser());\n  openNotification({\n    text: '   ',\n    variant: 'info'\n  });\n};\n\nexport const saveProfile = ({ firstName, surName, middleName, oldPassword, newPassword, avatar }) => (\n  dispatch,\n  getState\n) =>\n  new Promise(resolve => {\n    \n    const data = new FormData()\n    data.append('firstName', firstName)\n    data.append('surName', surName)\n    data.append('middleName', middleName)\n    data.append('oldPassword', oldPassword)\n    data.append('newPassword', newPassword)\n    data.append('avatar', avatar);\n\n    dispatch(setIsLoadingUserProfile(true));\n    request({ url: '/profile', method: 'PATCH', data, getState, dispatch })\n      .then(data => {\n        dispatch(setProfileData(data));\n        dispatch(openNotification({ text: '  !', variant: 'success' }));\n        resolve(true);\n      })\n      .catch(error => dispatch(openNotification({ text: error.message, variant: 'error' })))\n      .finally(() => dispatch(setIsLoadingUserProfile(false)));\n  });\n","export default {\n    home: '/',\n    registration: '/registration',\n    news: '/news',\n    chat: '/chat',\n    profile: '/profile',\n    adminPanel: '/admin-panel'\n}","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Route, Redirect } from 'react-router-dom';\nimport _ from 'lodash';\nimport {\n  userPermissionsSelector,\n  isAuthorizedSelector\n} from '../../store/auth';\nimport routes from '../../constants/routes';\nconst PrivateRoute = ({\n  permissionPath,\n  path,\n  component,\n  permissions,\n  isAuthorized\n}) => {\n  if (!isAuthorized || (permissionPath && !_.get(permissions, [permissionPath, 'R'], false)))\n    return <Redirect from={path} to={routes.home} />;\n\n  return <Route path={path} component={component} />;\n};\n\nexport default connect(state => ({\n  permissions: userPermissionsSelector(state),\n  isAuthorized: isAuthorizedSelector(state)\n}))(PrivateRoute);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { Button } from '@material-ui/core';\n\nconst AdapterLink = React.forwardRef((props, ref) => (\n  <Link innerRef={ref} {...props} />\n));\n\nconst ButtonLink = withRouter(\n  ({ path, location, children, isRouterLink, color = 'primary' }) => (\n    <Button\n      color={\n        isRouterLink ? (location.pathname === path ? color : 'default') : color\n      }\n      component={AdapterLink}\n      to={path}\n    >\n      {children}\n    </Button>\n  )\n);\n\nexport default ButtonLink;\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { AppBar, Toolbar, Container  } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport ButtonLink from '../common/ButtonLink';\nimport routes from '../../constants/routes'\nimport {\n  userPermissionsSelector,\n  isAuthorizedSelector,\n  userProfileSelector\n} from '../../store/auth';\nimport _get from 'lodash.get'\n\nconst styles = () => ({\n  logo: {\n    flexGrow: 1\n  }\n});\n\nclass AppHeader extends PureComponent {\n  renderAuthorizedNav() {\n    const { permissions, profile } = this.props;\n    return (\n      <>\n        {_get(permissions, 'news.R', false) && (\n          <ButtonLink path={routes.news} isRouterLink>\n            \n          </ButtonLink>\n        )}\n        {_get(permissions, 'chat.R', false) && (\n          <ButtonLink path={routes.chat} isRouterLink>\n            \n          </ButtonLink>\n        )}\n\n        {_get(permissions, 'settings.R', false) && (\n          <ButtonLink path={routes.adminPanel} isRouterLink>\n            \n          </ButtonLink>\n        )}\n        <ButtonLink path={routes.profile} isRouterLink>\n        { profile ? profile.username : '' }\n        </ButtonLink>\n      </>\n    );\n  }\n  render() {\n    const { classes, isAuthorized } = this.props;\n    return (\n      <div>\n        <AppBar position=\"static\" color=\"default\" className={classes.appBar}>\n          <Container>\n            <Toolbar>\n              <div className={classes.logo}>\n                <img src=\"../../assets/img/logo.png\" alt=\"logo\" />\n              </div>\n              <ButtonLink path={routes.home} isRouterLink>\n                \n              </ButtonLink>\n              {isAuthorized ? this.renderAuthorizedNav() : null}\n            </Toolbar>\n          </Container>\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isAuthorized: isAuthorizedSelector(state),\n  permissions: userPermissionsSelector(state),\n  profile: userProfileSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(AppHeader);\n","import React from 'react';\nimport {\n  FormControl,\n  Input,\n  InputLabel,\n  InputAdornment\n} from '@material-ui/core';\nimport { Person } from '@material-ui/icons';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  textField: {\n    display: 200,\n    marginBottom: theme.spacing(3)\n  }\n});\n\nconst AuthFormInput = withStyles(styles)(\n  ({ id, classes, handleChange, value, label, required }) => {\n    return (\n      <FormControl className={classes.textField} required={required}>\n        <InputLabel htmlFor={'input-' + id}>{label}</InputLabel>\n        <Input\n          id={'input-' + id}\n          type=\"text\"\n          value={value}\n          autoComplete={id}\n          onChange={handleChange}\n          startAdornment={\n            <InputAdornment position=\"start\">\n              <Person />\n            </InputAdornment>\n          }\n        />\n      </FormControl>\n    );\n  }\n);\n\nexport default AuthFormInput;\n","import React from 'react';\nimport {\n  FormControl,\n  Input,\n  InputLabel,\n  InputAdornment,\n  IconButton\n} from '@material-ui/core';\nimport { Visibility, VisibilityOff, Https } from '@material-ui/icons';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nconst styles = theme => ({\n  textField: {\n    display: 200,\n    marginBottom: theme.spacing(3)\n  }\n});\n\nconst PasswordInput = withStyles(styles)(\n  ({ id, classes, handleChange, value, label, className, name }) => {\n    const [values, setValues] = React.useState({\n      showPassword: false\n    });\n    const handleClickShowPassword = () => {\n      setValues({ showPassword: !values.showPassword });\n    };\n\n    const handleMouseDownPassword = event => {\n      event.preventDefault();\n    };\n\n    return (\n      <FormControl\n        className={classNames(classes.textField, className)}\n        required\n      >\n        <InputLabel htmlFor={id}>{label}</InputLabel>\n        <Input\n          id={id}\n          autoComplete={id}\n          type={values.showPassword ? 'text' : 'password'}\n          name={name}\n          value={value}\n          onChange={handleChange}\n          startAdornment={\n            <InputAdornment position=\"start\">\n              <Https />\n            </InputAdornment>\n          }\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <IconButton\n                aria-label=\"toggle password visibility\"\n                onClick={handleClickShowPassword}\n                onMouseDown={handleMouseDownPassword}\n              >\n                {values.showPassword ? <Visibility /> : <VisibilityOff />}\n              </IconButton>\n            </InputAdornment>\n          }\n        />\n      </FormControl>\n    );\n  }\n);\n\nexport default PasswordInput;\n","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Typography, Paper, Button } from '@material-ui/core';\nimport AuthFormInput from '../common/AuthFormInput';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { loginUser } from '../../store/auth';\nimport routes from '../../constants/routes';\n\nconst styles = () => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '20px 40px',\n    maxWidth: '300px'\n  },\n  textCenter: {\n    textAlign: 'center'\n  }\n});\n\nconst LoginForm = ({ classes, dispatch }) => {\n  const [values, setValues] = useState({\n    username: '',\n    password: ''\n  });\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    const { username, password } = values;\n    dispatch(loginUser({ username, password }));\n  };\n  return (\n    <>\n      <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\n        <AuthFormInput\n          handleChange={handleChange('username')}\n          value={values.username}\n          id=\"username\"\n          label=\" \"\n          required\n        />\n        <PasswordInput\n          handleChange={handleChange('password')}\n          value={values.password}\n          id=\"password\"\n          label=\"\"\n        />\n        <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n          \n        </Button>\n      </Paper>\n      <Typography className={classNames(classes.textCenter, classes.form)}>\n          ? <Link to={routes.registration}></Link>\n      </Typography>\n    </>\n  );\n};\n\nexport default compose(\n  withStyles(styles),\n  connect()\n)(LoginForm);\n","import React, { useState } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Typography, Paper, Button } from '@material-ui/core';\nimport AuthFormInput from '../common/AuthFormInput';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { registerUser } from '../../store/auth';\nimport routes from '../../constants/routes'\nconst styles = () => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '20px 40px',\n    maxWidth: '300px'\n  },\n  textCenter: {\n    textAlign: 'center'\n  }\n});\n\nconst RegistrationForm = ({ classes, dispatch, history }) => {\n  const [values, setValues] = useState({\n    username: '',\n    password: '',\n    repeatPassword: '',\n    firstname: '',\n    lastname: '',\n    patronicname: ''\n  });\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    const { username, password, firstname, lastname, patronicname } = values;\n    dispatch(\n      registerUser({ username, password, firstname, lastname, patronicname })\n    )\n      .then(() => history.push(routes.home))\n      .catch(console.error);\n  };\n  return (\n    <>\n      <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\n        <AuthFormInput\n          id=\"username\"\n          handleChange={handleChange('username')}\n          value={values.username}\n          label=\" \"\n          required\n        />\n        <AuthFormInput\n          id=\"lastname\"\n          handleChange={handleChange('lastname')}\n          value={values.lastname}\n          label=\"\"\n        />\n        <AuthFormInput\n          id=\"firstname\"\n          handleChange={handleChange('firstname')}\n          value={values.firstname}\n          label=\"\"\n        />\n        <AuthFormInput\n          id=\"patronicname\"\n          handleChange={handleChange('patronicname')}\n          value={values.patronicname}\n          label=\"\"\n        />\n        <PasswordInput\n          id=\"password\"\n          handleChange={handleChange('password')}\n          value={values.password}\n          label=\"\"\n        />\n        <PasswordInput\n          id=\"repeatPassword\"\n          handleChange={handleChange('repeatPassword')}\n          value={values.repeatPassword}\n          label=\" \"\n        />\n        <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n          \n        </Button>\n      </Paper>\n      <Typography className={classNames(classes.textCenter, classes.form)}>\n         ? <Link to={routes.home}></Link>\n      </Typography>\n    </>\n  );\n};\n\nexport default compose(\n  withStyles(styles),\n  connect(),\n  withRouter\n)(RegistrationForm);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Paper, Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose';\nimport { logout } from '../../store/auth';\n\nconst styles = () => ({\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    padding: '20px 40px',\n    maxWidth: '300px'\n  }\n});\nconst LogoutForm = ({ classes, dispatch }) => {\n  const handleSubmit = event => {\n    event.preventDefault();\n    dispatch(logout());\n  };\n  return (\n    <Paper className={classes.form} component=\"form\" onSubmit={handleSubmit}>\n      <Button color=\"primary\" variant=\"contained\" type=\"submit\">\n        \n      </Button>\n    </Paper>\n  );\n};\n\nexport default compose(\n  withStyles(styles),\n  connect()\n)(LogoutForm);\n","import React, { PureComponent } from 'react';\nimport { Route, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { Container, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/core/styles';\nimport { compose } from 'recompose';\nimport { isAuthorizedSelector } from '../../store/auth';\n\nimport LoginForm from './LoginForm';\nimport RegistrationForm from './RegistrationForm';\nimport LogoutForm from './LogoutForm';\n\nconst styles = () => ({\n  wrapper: {\n    background: 'url(\"/assets/img/background.png\") no-repeat',\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  }\n});\n\nclass Auth extends PureComponent {\n  render() {\n    const { classes, isAuthorized } = this.props;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n             \n            <br />\n             \n          </Typography>\n          {isAuthorized ? (\n            <LogoutForm />\n          ) : (\n            <>\n              <Route path=\"/\" exact component={LoginForm} />\n              <Route path=\"/registration\" component={RegistrationForm} />\n            </>\n          )}\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isAuthorized: isAuthorizedSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps),\n  withRouter\n)(Auth);\n","import { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport request from '../../helpers/request';\n\nexport const isLoadingNewsListSelector = state => state.news.isLoadingNewsList;\nexport const isLoadingNewsFormSelector = state => state.news.isLoadingNewsForm;\nexport const isLoadedSelector = state => state.news.isLoaded;\nexport const newsListSelector = state => state.news.news;\n\nconst actionsPrefix = 'NEWS'\nexport const setIsLoadingNewsList = createAction(`${actionsPrefix}/SET_IS_LOADING_NEWS_LIST`)\nexport const setIsLoadingNewsForm = createAction(`${actionsPrefix}/SET_IS_LOADING_NEWS_FORM`)\nexport const setNewsList = createAction(`${actionsPrefix}/SET_NEWS_LIST`)\nexport const appendNews = createAction(`${actionsPrefix}/APPEND_NEWS`)\nexport const setToZeroNewsList = createAction(`${actionsPrefix}/SET_TO_ZERO_NEWS_LIST`)\nexport const setIsLoaded = createAction(`${actionsPrefix}/SET_IS_LOADED`)\n\n\nconst isLoadingNewsList = handleActions({\n  [setIsLoadingNewsList]: (_, action) => action.payload\n}, false)\n\nconst isLoadingNewsForm = handleActions({\n  [setIsLoadingNewsForm]: (_, action) => action.payload\n}, false)\n\nconst isLoaded = handleActions({\n  [setNewsList]: (_, action) => true\n}, false)\n\nconst news = handleActions({\n  [setNewsList]: (_, action) => action.payload,\n  [appendNews]: (state, action) => [action.payload, ...state],\n  [setToZeroNewsList]: () => []\n}, [])\n\nexport default combineReducers({\n  isLoadingNewsList,\n  isLoadingNewsForm,\n  isLoaded,\n  news\n})\n\nexport const getNews = () => (dispatch, getState) => {\n  if (isLoadedSelector(getState())) return;\n  dispatch(setIsLoadingNewsList(true))\n  request({ url: '/news', method: 'GET', getState, dispatch })\n    .then(data => dispatch(setNewsList(data)))\n    .catch(error => console.log(error))\n    .finally(() => dispatch(setIsLoadingNewsList(false)))\n}\n\nexport const createNews = ({ title, text }) => (dispatch, getState) => new Promise((resolve, reject) => {\n  const data = { title, text }\n  dispatch(setIsLoadingNewsForm(true))\n  request({ url: '/news', method: 'POST', data, getState, dispatch })\n    .then(data => {\n      dispatch(setNewsList(data))\n      resolve(data)\n    })\n    .catch(error => {\n      reject(error)\n    })\n    .finally(() =>  dispatch(setIsLoadingNewsForm(false)))\n})\n\nexport const updateNews = ({ id, title, text }) => (dispatch, getState) => new Promise((resolve, reject) => {\n  const data = { title, text }\n  dispatch(setIsLoadingNewsForm(true))\n  request({ url: `/news/${id}`, method: 'PATCH', data, getState, dispatch })\n    .then(data => {\n      dispatch(setNewsList(data))\n      resolve(data)\n    })\n    .catch(error => {\n      reject(error)\n    })\n    .finally(() =>  dispatch(setIsLoadingNewsForm(false)))\n})\n\nexport const deleteNews = ({ id }) => (dispatch, getState) => new Promise((resolve, reject) => {\n  dispatch(setIsLoadingNewsList(true))\n  request({ url: `/news/${id}`, method: 'DELETE', getState, dispatch })\n    .then(data => {\n      dispatch(setNewsList(data))\n      resolve(data)\n    })\n    .catch(error => {\n      reject(error)\n    })\n    .finally(() =>  dispatch(setIsLoadingNewsList(false)))\n})","import React from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { deleteNews } from '../../store/news';\nimport {\n  Typography,\n  Card,\n  CardContent,\n  CardHeader,\n  Avatar,\n  CardActions,\n  Button\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport ButtonLink from '../common/ButtonLink';\nimport { userPermissionsSelector } from '../../store/auth';\nimport _get from 'lodash.get'\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  card: {\n    marginBottom: theme.spacing(2)\n  }\n});\n\nconst NewsListCard = withStyles(styles)(({ classes, post, dispatch, permission }) => {\n  const removeNews = () => {\n    dispatch(deleteNews({ id: post.id }));\n  };\n  const isUpdateAllowed = !!_get(permission, 'news.U', false);\n  const isDeleteAllowed = !!_get(permission, 'news.D', false);\n  return (\n    <Card className={classes.card}>\n      <CardHeader\n        avatar={\n          <Avatar\n            aria-label=\"recipe\"\n            src={post.user.image || '/assets/img/no-user-image.png'}\n            alt={post.user.username}\n          ></Avatar>\n        }\n        title={post.title}\n        subheader={post.created_at}\n      />\n      <CardContent>\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n          {post.text}\n        </Typography>\n      </CardContent>\n      <CardActions>\n      { isUpdateAllowed && <ButtonLink path={`/news/${post.id}/edit`}></ButtonLink> }\n      { isDeleteAllowed && <Button onClick={removeNews}></Button> }\n      </CardActions>\n    </Card>\n  );\n});\n\nconst mapStateToProps = state => ({\n  permission: userPermissionsSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(NewsListCard);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport {\n  getNews,\n  isLoadingNewsListSelector,\n  isLoadedSelector,\n  newsListSelector\n} from '../../store/news';\nimport ButtonLink from '../common/ButtonLink';\nimport NewsListCard from './NewsListCard';\nimport { userPermissionsSelector } from '../../store/auth';\nimport _get from 'lodash.get';\nimport routes from '../../constants/routes';\n\nclass NewsList extends PureComponent {\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(getNews());\n  }\n  render() {\n    const { isLoading, isLoaded, news, permission } = this.props;\n    const isCreateAllowed = !!_get(permission, 'news.C', false);\n    return (\n      <>\n        {isCreateAllowed && (\n          <ButtonLink color=\"primary\" path={`${routes.news}/add`}>\n            \n          </ButtonLink>\n        )}\n        <div>\n          {isLoading ? <div>Loading...</div> : null}\n          {isLoaded ? (\n            news.length ? (\n              news.map(post => <NewsListCard post={post} key={post.id} />)\n            ) : (\n              <div> </div>\n            )\n          ) : null}\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isLoading: isLoadingNewsListSelector(state),\n  isLoaded: isLoadedSelector(state),\n  news: newsListSelector(state),\n  permission: userPermissionsSelector(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  null\n)(NewsList);\n","import React, { PureComponent } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { isLoadingNewsFormSelector, createNews, updateNews, newsListSelector } from '../../store/news';\nimport { withStyles } from '@material-ui/styles';\nimport { Paper, Grid, TextField, ButtonGroup, Button } from '@material-ui/core';\nimport ButtonLink from '../common/ButtonLink';\nimport routes from '../../constants/routes';\n\nconst styles = theme => ({\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  textField: {\n    display: 'block',\n    width: '100%'\n  }\n});\n\nclass NewsAdd extends PureComponent {\n  state = {\n    title: '',\n    text: '',\n    createdAt: new Date(),\n    user: ''\n  };\n  componentDidMount() {\n    const { match, newsList } = this.props;\n    if (match.params.id) {\n      const { title, text, created_at, user } = newsList.find(news => news.id === match.params.id)\n      this.setState({\n        title,\n        text,\n        createdAt: created_at,\n        user: user.username\n      })\n    }\n  }\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    const { title, text } = this.state;\n    const { history, dispatch, match } = this.props;\n    dispatch(match.params.id ? updateNews({ title, text, id: match.params.id }) : createNews({ title, text })).then(() => history.push(routes.news));\n  };\n  render() {\n    const { classes } = this.props;\n    const { title, text, createdAt, user } = this.state;\n    return (\n      <Paper\n        className={classes.formCard}\n        component=\"form\"\n        onSubmit={this.handleSubmit}\n      >\n        <Grid container spacing={2}>\n          <Grid item xs={4}>\n            <TextField\n              label=\"\"\n              value={user}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              disabled\n              fullWidth\n            />\n            <TextField\n              label=\"\"\n              value={createdAt}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              disabled\n              fullWidth\n            />\n            <TextField\n              label=\"\"\n              name=\"title\"\n              value={title}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              fullWidth\n            />\n          </Grid>\n          <Grid item xs={8}>\n            <TextField\n              label=\"\"\n              name=\"text\"\n              value={text}\n              onChange={this.handleChange}\n              className={classes.textField}\n              margin=\"normal\"\n              multiline\n              fullWidth\n              rows={5}\n            />\n            <ButtonGroup>\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\n                \n              </Button>\n              <ButtonLink path=\"/news\" variant=\"contained\">\n                \n              </ButtonLink>\n            </ButtonGroup>\n          </Grid>\n        </Grid>\n      </Paper>\n    );\n  }\n}\nconst mapStateToProps = state => ({\n  isLoading: isLoadingNewsFormSelector(state),\n  newsList: newsListSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  withRouter,\n  connect(\n    mapStateToProps,\n    null\n  )\n)(NewsAdd);\n","import React, { PureComponent } from 'react';\nimport { Route } from 'react-router-dom';\nimport { Container, Typography } from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport NewsList from './NewsList';\nimport NewsAdd from './NewsAdd';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  }\n});\n\nclass News extends PureComponent {\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n             \n          </Typography>\n\n          <Route path=\"/news\" exact component={NewsList} />\n          <Route path=\"/news/add\" component={NewsAdd} />\n          <Route path=\"/news/:id/edit\" component={NewsAdd} />\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default withStyles(styles)(News);\n","import socketIO from 'socket.io-client';\nimport { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport { userProfileSelector } from '../auth';\nlet socket = null;\n\nexport const chatUsersSelector = state => state.chat.users;\nexport const chatMessagesList = state => state.chat.messages;\nexport const chatSelectedRoomSelector = state => state.chat.selectedRoom;\nexport const chatMessageText = state => state.chat.messageText;\n\nconst actionsPrefix = 'CHAT';\nexport const setUsers = createAction(`${actionsPrefix}/SET_USERS`);\nexport const addUser = createAction(`${actionsPrefix}/ADD_USER`);\nexport const updateUser = createAction(`${actionsPrefix}/UPDATE_USER`);\nexport const removeUser = createAction(`${actionsPrefix}/REMOVE_USER`);\nexport const appendMessage = createAction(`${actionsPrefix}/ADD_MESSAGE`);\nexport const setRoomHistory = createAction(`${actionsPrefix}/SET_ROOM_HISTORY`);\nexport const setToZeroMessages = createAction(`${actionsPrefix}/SET_TO_ZERO_MESSAGES`);\nexport const setSelectedRoom = createAction(`${actionsPrefix}/SET_SELECTED_ROOM`);\nexport const setMessageText = createAction(`${actionsPrefix}/SET_MESSAGE_TEXT`);\nexport const resetMessage = createAction(`${actionsPrefix}/RESET_MESSAGE`);\n\nconst users = handleActions(\n  {\n    [setUsers]: (_, action) => action.payload,\n    [addUser]: (state, action) => [action.payload, ...state],\n    [updateUser]: (state, action) => state.map(user => user.userId === action.payload.userId ? action.payload : user),\n    [removeUser]: (state, action) => state.filter(user => user.socketId !== action.payload)\n  },\n  []\n);\n\nconst messages = handleActions(\n  {\n    [appendMessage]: (state, action) =>  [...state, action.payload],\n    [setRoomHistory]: (state, action) => action.payload,\n    [setToZeroMessages]: () => []\n  },\n  []\n);\n\nconst selectedRoom = handleActions(\n  {\n    [setSelectedRoom]: (_, action) => action.payload\n  },\n  null\n);\n\nconst messageText = handleActions({\n  [setMessageText]: (_, action) => action.payload,\n  [resetMessage]: () => ''\n}, '')\n\nexport default combineReducers({\n  users,\n  messages,\n  selectedRoom,\n  messageText\n});\n\nexport const connectSocket = () => (dispatch, getState) => {\n  const userProfile = userProfileSelector(getState());\n  socket = socketIO('http://localhost:3000');\n\n  socket.emit('users:connect', { userId: userProfile.id, username: userProfile.username });\n\n  socket\n    .on('users:list', data => dispatch(setUsers(data)))\n    .on('users:add', data => dispatch(addUser(data)))\n    .on('users:leave', data => {\n      dispatch(removeUser(data))\n      const selectedRoom = chatSelectedRoomSelector(getState())\n      if (selectedRoom && selectedRoom.socketId === data) dispatch(setSelectedRoom(null))\n    })\n    .on('message:history', data => dispatch(setRoomHistory(data)))\n    .on('message:add', data => dispatch(appendMessage(data)));\n};\n\nexport const connectRoom = ({ userId, socketId }) => (dispatch, getState) => {\n  const userProfile = userProfileSelector(getState());\n  dispatch(setToZeroMessages())\n  dispatch(setSelectedRoom({ recipientId: userId, socketId }))\n  \n  socket.emit('message:history', { recipientId: userId, userId: userProfile.id })\n}\n\nexport const sendMessage = () => (dispatch, getState) => {\n  const state = getState()\n  const userProfile = userProfileSelector(state);\n  const selectedRoom = chatSelectedRoomSelector(state);\n  const messageText = chatMessageText(state)\n  socket.emit('message:add', { senderId: userProfile.id, recipientId: selectedRoom.recipientId, roomId: selectedRoom.socketId, text: messageText });\n  dispatch(resetMessage())\n};\n\n\nexport const disconnectSocket = () => (dispatch) => {\n  socket && socket.disconnect()\n  dispatch(setUsers([]))\n  dispatch(setToZeroMessages())\n  dispatch(setSelectedRoom(null))\n  dispatch(resetMessage())\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  Paper,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n  CardHeader,\n  Divider,\n  ListItemSecondaryAction,\n  Badge\n} from '@material-ui/core';\nimport MailIcon from '@material-ui/icons/Mail';\nimport { withStyles } from '@material-ui/styles';\nimport { compose } from 'recompose';\nimport { chatUsersSelector, chatSelectedRoomSelector, connectRoom } from '../../store/chat';\nconst styles = theme => ({\n  column: {\n    // backgroundColor: '#494949',\n    height: 'calc(100vh - 80px)',\n    display: 'flex',\n    flexDirection: 'column'\n  }\n});\n\nconst ChannelsList = ({ classes, users, selectedRoom, dispatch }) => {\n  const selectRoom = user => {\n    dispatch(connectRoom({ userId: user.userId, socketId: user.socketId }));\n  };\n  return (\n    <Paper className={classes.column} square>\n      <CardHeader title={<Typography variant=\"h5\"> </Typography>} />\n      <Divider />\n      <List>\n        {users.map((user, index) => (\n          <ListItem\n            button\n            key={user.userId}\n            selected={user.userId === selectedRoom && selectedRoom.userId}\n            onClick={() => selectRoom(user)}\n          >\n            <ListItemText primary={user.username} />\n          </ListItem>\n        ))}\n      </List>\n    </Paper>\n  );\n};\nconst mapStateToProps = state => ({\n  users: chatUsersSelector(state),\n  selectedRoom: chatSelectedRoomSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(ChannelsList);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Grid, Card, CardContent, CardActions, TextField, Button } from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport classNames from 'classnames';\nimport _get from 'lodash.get';\nimport { sendMessage, setMessageText, chatMessageText } from '../../store/chat';\nimport { compose } from 'recompose';\nimport { userProfileSelector, userPermissionsSelector } from '../../store/auth';\nconst styles = theme => ({\n  messageContainer: {\n    marginBottom: theme.spacing(2)\n  },\n  message: {\n    padding: theme.spacing(1)\n  },\n  messagePrimary: {\n    backgroundColor: theme.palette.grey.A700\n  },\n  messageSecondary: {\n    backgroundColor: theme.palette.secondary.main\n  },\n  isMyMessage: {\n    alignSelf: 'end'\n  },\n  isAnotherMessage: {\n    alignSelf: 'flex-end'\n  },\n  chatArea: {\n    height: '100%',\n    overflowY: 'scroll'\n  },\n  form: {\n    display: 'flex',\n    alignItems: 'center',\n    width: '100%'\n  }\n});\n\nclass ActiveChannelArea extends PureComponent {\n  handleChange = event => {\n    const { dispatch } = this.props;\n    dispatch(setMessageText(event.target.value));\n  };\n  handleSubmit = event => {\n    event.preventDefault();\n    const { dispatch } = this.props;\n    dispatch(sendMessage());\n  };\n  render() {\n    const { classes, messages, messageText, userId, permission } = this.props;\n    const isCreateAllowed = !!_get(permission, 'chat.C', false);\n    return (\n      <>\n        <CardContent className={classes.chatArea}>\n          <Grid container direction=\"column\" wrap=\"nowrap\">\n            {messages.map((message, i) => (\n              <Grid\n                item\n                key={i}\n                className={classNames(\n                  classes.messageContainer,\n                  message.senderId !== userId ? classes.isMyMessage : classes.isAnotherMessage\n                )}\n              >\n                <Card\n                  className={classNames(\n                    classes.message,\n                    message.senderId !== userId ? classes.messagePrimary : classes.messageSecondary\n                  )}\n                >\n                  {message.text}\n                </Card>\n              </Grid>\n            ))}\n          </Grid>\n        </CardContent>\n        {isCreateAllowed && (\n          <CardActions>\n            <form onSubmit={this.handleSubmit} className={classes.form}>\n              <TextField\n                label=\"Label\"\n                style={{ margin: 8 }}\n                fullWidth\n                margin=\"normal\"\n                variant=\"filled\"\n                InputLabelProps={{\n                  shrink: true\n                }}\n                value={messageText}\n                onChange={this.handleChange}\n              />\n              <Button variant=\"contained\" color=\"primary\" type=\"submit\">\n                \n              </Button>\n            </form>\n          </CardActions>\n        )}\n      </>\n    );\n  }\n}\nconst mapStateToProps = state => ({\n  messageText: chatMessageText(state),\n  userId: userProfileSelector(state).id,\n  permission: userPermissionsSelector(state)\n});\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(ActiveChannelArea);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux'\nimport { connectSocket, disconnectSocket, chatUsersSelector, chatSelectedRoomSelector, chatMessagesList } from '../../store/chat'\nimport {\n  Grid,\n  Container,\n  Card\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport ChatChannelsList from './ChatChannelList'\nimport ChatActiveChatArea from './ChatActiveChatArea'\nimport { compose } from 'recompose';\nconst styles = theme => ({\n  toolbar: theme.mixins.toolbar,\n  column: {\n    // backgroundColor: '#494949',\n    height: 'calc(100vh - 80px)',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: theme.spacing(1)\n  },\n  empty: {\n    padding: theme.spacing(3)\n  }\n});\n\nclass Chat extends PureComponent {\n  componentDidMount () {\n    const { dispatch } = this.props;\n    dispatch(connectSocket())\n  }\n\n  componentWillUnmount () {\n    const { dispatch } = this.props;\n    dispatch(disconnectSocket())\n  }\n  render() {\n    const { classes, users, messages, selectedRoom } = this.props;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Grid container spacing={1}>\n            <Grid item xs={4}>\n              <ChatChannelsList users={users} selected={selectedRoom} />\n            </Grid>\n            <Grid item xs={8}>\n              <Card className={classes.column} square>\n                { selectedRoom ? <ChatActiveChatArea messages={messages} /> : <div className={classes.empty}> </div> }\n              </Card>\n            </Grid>\n          </Grid>\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  users: chatUsersSelector(state),\n  selectedRoom: chatSelectedRoomSelector(state),\n  messages: chatMessagesList(state)\n})\nexport default compose(withStyles(styles), connect(mapStateToProps))(Chat);\n","import React, { PureComponent } from 'react';\nimport { compose } from 'recompose';\nimport { connect } from 'react-redux';\nimport {\n  Container,\n  Typography,\n  Avatar,\n  Grid,\n  Paper,\n  Button,\n  TextField,\n  CardActions\n} from '@material-ui/core';\nimport AspectRatio from 'react-aspect-ratio';\nimport PasswordInput from '../common/PasswordInput';\nimport { withStyles } from '@material-ui/styles';\nimport { userProfileSelector, saveProfile, isLoadingUserProfileSelector } from '../../store/auth';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  avatarPreview: {\n    width: '100%',\n    height: '100%',\n    borderRadius: '8px'\n  },\n  avatarPreviewWrapper: {\n    marginBottom: theme.spacing(2),\n    width: '100%'\n  },\n  uploadButton: {\n    display: 'block',\n    textAlign: 'center'\n  },\n  form: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    marginBottom: theme.spacing(3)\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200\n  },\n  formActions: {\n    marginTop: 'auto',\n    padding: 0\n  }\n});\n\nclass Profile extends PureComponent {\n  state = {\n    firstName: '',\n    middleName: '',\n    surName: '',\n    oldPassword: '',\n    newPassword: '',\n    confirmPassword: '',\n    image: '',\n    fileRef: React.createRef()\n  };\n\n  componentDidMount() {\n    const { userProfile } = this.props;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      image: userProfile.image\n    });\n  }\n\n  cancelHandler = () => {\n    const { userProfile } = this.props;\n    this.setState({\n      firstName: userProfile.firstName,\n      middleName: userProfile.middleName,\n      surName: userProfile.surName,\n      oldPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n      image: userProfile.image\n    });\n  };\n\n  handleChange = event => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleChangeFile = () => {\n    const { fileRef } = this.state;\n\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      this.setState({ image: e.target.result });\n    };\n\n    fileRef.current.files[0] && reader.readAsDataURL(fileRef.current.files[0]);\n  };\n\n  submitHandler = () => {\n    const { dispatch } = this.props;\n    const { firstName, surName, middleName, oldPassword, newPassword, fileRef } = this.state;\n    dispatch(\n      saveProfile({\n        firstName,\n        surName,\n        middleName,\n        oldPassword,\n        newPassword,\n        avatar: fileRef.current.files[0] || null\n      })\n    ).then(() => {\n      this.cancelHandler();\n    });\n  };\n\n  render() {\n    const { classes, isLoading } = this.props;\n    const {\n      firstName,\n      surName,\n      middleName,\n      oldPassword,\n      newPassword,\n      confirmPassword,\n      image,\n      fileRef\n    } = this.state;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Paper className={classes.formCard}>\n            <Grid container spacing={2}>\n              <Grid item xs={4}>\n                <AspectRatio className={classes.avatarPreviewWrapper}>\n                  <Avatar\n                    className={classes.avatarPreview}\n                    src={image || '/assets/img/no-user-image-big.png'}\n                  ></Avatar>\n                </AspectRatio>\n                <Button\n                  className={classes.uploadButton}\n                  variant=\"contained\"\n                  component=\"label\"\n                  color=\"primary\"\n                >\n                   \n                  <input\n                    type=\"file\"\n                    style={{ display: 'none' }}\n                    ref={fileRef}\n                    onChange={this.handleChangeFile}\n                  />\n                </Button>\n              </Grid>\n              <Grid item xs={8}>\n                <Grid container direction=\"column\" style={{ height: '100%' }}>\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n                     \n                  </Typography>\n                  <div className={classes.form}>\n                    <TextField\n                      label=\"\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"surName\"\n                      value={surName}\n                      onChange={this.handleChange}\n                    />\n                    <TextField\n                      label=\"\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"firstName\"\n                      value={firstName}\n                      onChange={this.handleChange}\n                    />\n                    <TextField\n                      label=\"\"\n                      className={classes.textField}\n                      margin=\"normal\"\n                      name=\"middleName\"\n                      value={middleName}\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                  <Typography variant=\"h4\" component=\"h2\" gutterBottom>\n                    \n                  </Typography>\n                  <div className={classes.form}>\n                    <PasswordInput\n                      label=\" \"\n                      className={classes.textField}\n                      name=\"oldPassword\"\n                      value={oldPassword}\n                      handleChange={this.handleChange}\n                    />\n                    <PasswordInput\n                      label=\" \"\n                      className={classes.textField}\n                      name=\"newPassword\"\n                      value={newPassword}\n                      handleChange={this.handleChange}\n                    />\n                    <PasswordInput\n                      label=\" \"\n                      className={classes.textField}\n                      name=\"confirmPassword\"\n                      value={confirmPassword}\n                      handleChange={this.handleChange}\n                    />\n                  </div>\n                  <CardActions className={classes.formActions}>\n                    <Button\n                      color=\"primary\"\n                      variant=\"contained\"\n                      disabled={isLoading}\n                      onClick={this.submitHandler}\n                    >\n                      \n                    </Button>\n                    <Button variant=\"outlined\" onClick={this.cancelHandler} disabled={isLoading}>\n                      \n                    </Button>\n                  </CardActions>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Paper>\n        </Container>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  userProfile: userProfileSelector(state),\n  isLoading: isLoadingUserProfileSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(Profile);\n","import { createAction, handleActions } from 'redux-actions';\nimport { combineReducers } from 'redux';\nimport request from '../../helpers/request';\nimport _get from 'lodash.get'\nimport { openNotification } from '../notifications';\nimport { userProfileSelector, getUserProfileFromToken } from '../auth'\n\nexport const isLoadingUsersSelector = state => state.adminPanel.isLoadingUsers;\nexport const usersSelector = state => state.adminPanel.users;\n\nconst actionsPrefix = 'ADMIN_PANEL';\nexport const setIsLoadingUsers = createAction(`${actionsPrefix}/SET_IS_LOADING_USERS`);\nexport const setIsLoadingForm = createAction(`${actionsPrefix}/SET_IS_LOADING_FORM`);\nexport const setUsers = createAction(`${actionsPrefix}/SET_USERS`);\nexport const setToZeroUsers = createAction(`${actionsPrefix}/SET_TO_ZERO_USERS`);\n\nconst isLoadingUsers = handleActions(\n  {\n    [setIsLoadingUsers]: (_, action) => action.payload\n  },\n  false\n);\n\nconst isLoadingForm = handleActions({ [setIsLoadingForm]: (_, action) => action.payload }, false);\n\nconst users = handleActions(\n  {\n    [setUsers]: (_, action) => action.payload,\n    [setToZeroUsers]: () => []\n  },\n  []\n);\n\nexport default combineReducers({\n  isLoadingUsers,\n  isLoadingForm,\n  users\n});\n\nexport const getUsers = () => (dispatch, getState) => {\n  dispatch(setIsLoadingUsers(true));\n  request({ url: '/users', getState, dispatch })\n    .then(data => {\n      dispatch(setUsers(data));\n    })\n    .catch(error =>\n      openNotification({\n        text: error.message,\n        variant: 'error'\n      })\n    )\n    .finally(() => dispatch(setIsLoadingUsers(false)));\n};\n\nexport const updateUserPermission = (userId, permission) => (dispatch, getState) => new Promise((resolve) => {\n  dispatch(setIsLoadingForm(true));\n  request({\n    url: `/users/${userId}/permission`,\n    method: 'PATCH',\n    data: { permission },\n    getState,\n    dispatch\n  })\n    .then(() => {\n      openNotification({ text: '!', variant: 'success' });\n      dispatch(getUsers());\n      const isSelf = _get(userProfileSelector(getState()), 'id', null) === userId;\n      isSelf && dispatch(getUserProfileFromToken())\n      resolve(true)\n    })\n    .catch(error => {\n      openNotification({\n        text: error.message,\n        variant: 'error'\n      })\n    })\n    .finally(() => dispatch(setIsLoadingForm(false)))\n});\n\n\nexport const deleteUser = userId => (dispatch, getState) => new Promise((resolve) => {\n  dispatch(setIsLoadingForm(true));\n  request({ url: `/users/${userId}`, method: 'DELETE', getState, dispatch })\n    .then(data => {\n      dispatch(getUsers(data));\n      resolve(true)\n    })\n    .catch(error => {\n      openNotification({\n        text: error.message,\n        variant: 'error'\n      })\n    })\n    .finally(() => dispatch(setIsLoadingForm(false)));\n});","import React from \"react\";\nimport {\n  Typography,\n  FormGroup,\n  FormControlLabel,\n  Checkbox\n} from \"@material-ui/core\";\n\n\nconst SettingsFormGroup = ({ handleChange, values, label }) => (\n  <>\n    <Typography variant=\"h5\" component=\"h3\" gutterBottom>\n      {label}\n    </Typography>\n    <FormGroup>\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.C}\n            value=\"create\"\n            onChange={handleChange(\"C\")}\n          />\n        }\n        label=\"\"\n      />\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.R}\n            value=\"read\"\n            onChange={handleChange(\"R\")}\n          />\n        }\n        label=\"\"\n      />\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.U}\n            value=\"update\"\n            onChange={handleChange(\"U\")}\n          />\n        }\n        label=\"\"\n      />\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={values.D}\n            value=\"delete\"\n            onChange={handleChange(\"D\")}\n          />\n        }\n        label=\"\"\n      />\n    </FormGroup>\n  </>\n);\n\nexport default SettingsFormGroup","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport _cloneDeep from 'lodash/cloneDeep';\nimport {\n  isLoadingUsersSelector,\n  usersSelector,\n  getUsers,\n  updateUserPermission,\n  deleteUser\n} from '../../store/adminPanel';\nimport {\n  Container,\n  Avatar,\n  Grid,\n  Paper,\n  Button,\n  ButtonGroup,\n  Select,\n  FormControl,\n  MenuItem,\n  InputLabel\n} from '@material-ui/core';\nimport { withStyles } from '@material-ui/styles';\nimport SettingsFormGroup from './AdminPanelSettingsFormGroup';\n\nconst styles = theme => ({\n  wrapper: {\n    width: '100%',\n    flex: '1 1 100%',\n    paddingTop: '40px'\n  },\n  formCard: {\n    padding: theme.spacing(2)\n  },\n  userSelect: {\n    width: '100%'\n  },\n  userAvatar: {\n    marginRight: theme.spacing(2)\n  },\n  mb3: {\n    marginBottom: theme.spacing(3)\n  }\n});\n\nconst defaultState = {\n  selectedUserId: '',\n  selectedUser: null,\n  permission: {\n    chat: {\n      C: true,\n      R: true,\n      U: false,\n      D: false\n    },\n    news: {\n      C: true,\n      R: true,\n      U: false,\n      D: false\n    },\n    settings: {\n      C: true,\n      R: true,\n      U: false,\n      D: false\n    }\n  }\n};\n\nclass AdminPanel extends PureComponent {\n  state = defaultState;\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(getUsers());\n  }\n\n  handleChange = part => partRule => event => {\n    const { checked } = event.target;\n    const { permission } = this.state;\n    this.setState({\n      permission: {\n        ...permission,\n        [part]: { ...permission[part], [partRule]: checked }\n      }\n    });\n  };\n  handleChangeUser = event => {\n    const { users } = this.props;\n    const { value } = event.target;\n    const selectedUser = value ? _cloneDeep(users.find(u => u.id === value)) : null;\n    this.setState({\n      selectedUserId: value,\n      selectedUser,\n      permission: selectedUser.permission\n    });\n  };\n\n  submitHandler = () => {\n    const { permission, selectedUserId } = this.state;\n    const { dispatch } = this.props;\n    dispatch(updateUserPermission(selectedUserId, permission));\n  };\n\n  cancelHandler = () => {\n    const { users } = this.props;\n    const { selectedUserId } = this.state;\n    const selectedUser = _cloneDeep(users.find(u => u.id === selectedUserId));\n    selectedUserId &&\n      this.setState({\n        selectedUser,\n        permission: selectedUser.permission\n      });\n  };\n\n  deleteHandler = () => {\n    const { selectedUserId } = this.state;\n    const { dispatch } = this.props;\n    selectedUserId && dispatch(deleteUser(selectedUserId)).then(() => this.setState(defaultState));\n  };\n\n  render() {\n    const { classes, users } = this.props;\n    const { selectedUserId, selectedUser } = this.state;\n    return (\n      <div className={classes.wrapper}>\n        <Container>\n          <Paper className={classes.formCard}>\n            <Grid container wrap=\"nowrap\" alignItems=\"center\" className={classes.mb3}>\n              <Avatar\n                src={(selectedUser && selectedUser.image) || '/assets/img/no-user-image.png'}\n                className={classes.userAvatar}\n              ></Avatar>\n              <FormControl className={classes.userSelect}>\n                <InputLabel htmlFor=\"age-simple\"> </InputLabel>\n                <Select value={selectedUserId} onChange={this.handleChangeUser}>\n                  <MenuItem value={null}> </MenuItem>\n                  {users.map(user => (\n                    <MenuItem value={user.id} key={user.id}>\n                      {user.username}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            {selectedUser && this.renderForms()}\n          </Paper>\n        </Container>\n      </div>\n    );\n  }\n  renderForms() {\n    const { classes } = this.props;\n    const { permission } = this.state;\n    return (\n      <>\n        <Grid container spacing={2} className={classes.mb3}>\n          <Grid item xs={4}>\n            <SettingsFormGroup\n              label=\" \"\n              values={permission['settings']}\n              handleChange={this.handleChange('settings')}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <SettingsFormGroup\n              label=\"\"\n              values={permission['news']}\n              handleChange={this.handleChange('news')}\n            />\n          </Grid>\n          <Grid item xs={4}>\n            <SettingsFormGroup\n              label=\"\"\n              values={permission['chat']}\n              handleChange={this.handleChange('chat')}\n            />\n          </Grid>\n        </Grid>\n        <Grid container spacing={2} justify=\"center\" alignItems=\"center\">\n          <ButtonGroup>\n            <Button variant=\"contained\" color=\"secondary\" onClick={this.submitHandler}>\n              \n            </Button>\n            <Button variant=\"contained\" onClick={this.cancelHandler}>\n              \n            </Button>\n            <Button variant=\"contained\" onClick={this.deleteHandler}>\n               \n            </Button>\n          </ButtonGroup>\n        </Grid>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isLoading: isLoadingUsersSelector(state),\n  users: usersSelector(state)\n});\n\nexport default compose(\n  withStyles(styles),\n  connect(mapStateToProps)\n)(AdminPanel);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  notificationsSelector,\n  openNotification,\n  closeNotification\n} from '../../store/notifications';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport InfoIcon from '@material-ui/icons/Info';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { amber, green } from '@material-ui/core/colors';\nimport IconButton from '@material-ui/core/IconButton';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon\n};\n\nconst useStyles1 = makeStyles(theme => ({\n  success: {\n    backgroundColor: green[600]\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark\n  },\n  info: {\n    backgroundColor: theme.palette.primary.main\n  },\n  warning: {\n    backgroundColor: amber[700]\n  },\n  icon: {\n    fontSize: 20\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1)\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n}));\n\nfunction MySnackbarContentWrapper(props) {\n  const classes = useStyles1();\n  const { className, message, onClose, variant, ...other } = props;\n  const Icon = variantIcon[variant];\n\n  return (\n    <SnackbarContent\n      className={clsx(classes[variant], className)}\n      aria-describedby=\"client-snackbar\"\n      message={\n        <span id=\"client-snackbar\" className={classes.message}>\n          <Icon className={clsx(classes.icon, classes.iconVariant)} />\n          {message}\n        </span>\n      }\n      action={[\n        <IconButton\n          key=\"close\"\n          aria-label=\"close\"\n          color=\"inherit\"\n          onClick={onClose}\n        >\n          <CloseIcon className={classes.icon} />\n        </IconButton>\n      ]}\n      {...other}\n    />\n  );\n}\n\nMySnackbarContentWrapper.propTypes = {\n  className: PropTypes.string,\n  message: PropTypes.string,\n  onClose: PropTypes.func,\n  variant: PropTypes.oneOf(['error', 'info', 'success', 'warning']).isRequired\n};\n\nexport default WrappedComponent => {\n  const withNotifications = ({\n    openNotification,\n    closeNotification,\n    notifications,\n    ...other\n  }) => {\n    const handleClose = notificationId => (e, reason) => {\n      if (reason === 'clickaway') {\n        return;\n      }\n      closeNotification(notificationId);\n    };\n    const currentNotification = notifications.find(\n      notification => !!notification.isActive\n    );\n    return (\n      <>\n        <WrappedComponent {...other} openNotification={openNotification} />\n        {currentNotification && (\n          <Snackbar\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'right'\n            }}\n            open\n            autoHideDuration={2500}\n            onClose={handleClose(currentNotification.id)}\n          >\n            <MySnackbarContentWrapper\n              onClose={handleClose(currentNotification.id)}\n              variant={currentNotification.variant}\n              message={currentNotification.text}\n            />\n          </Snackbar>\n        )}\n      </>\n    );\n  };\n\n  const mapStateToProps = state => ({\n    notifications: notificationsSelector(state)\n  });\n  const mapDispatchToProps = {\n    openNotification,\n    closeNotification\n  };\n  return connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(withNotifications);\n};\n","import React, { PureComponent } from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport PrivateRoute from '../common/PrivateRoute';\nimport { connect } from 'react-redux';\nimport { compose } from 'recompose';\nimport { getUserProfileFromToken } from '../../store/auth';\nimport routes from '../../constants/routes'\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Box from '@material-ui/core/Box';\nimport AppHeader from './AppHeader';\nimport Auth from '../Auth';\nimport News from '../News';\nimport Chat from '../Chat';\nimport Profile from '../Profile';\nimport AdminPanel from '../AdminPanel';\nimport withNotifications from '../common/withNotificationsHOC';\n\n\nconst styles = () => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    minHeight: '100vh',\n    backgroundColor: '#f5f5f5'\n  },\n  container: {\n    flex: '1 1 100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  mainLayoutWrapper: {\n    background: 'url(\"/assets/img/another-background.png\") no-repeat',\n    backgroundPosition: 'center center',\n    backgroundSize: 'cover',\n    width: '100%',\n    flex: '1 1 100%',\n    display: 'flex',\n    alignItems: 'stretch'\n  }\n});\n\nconst MainLayout = withStyles(styles)(({ children, classes }) => (\n  <div className={classes.mainLayoutWrapper}>{children}</div>\n));\n\nconst withLayout = Component => props => (\n  <MainLayout>\n    <Component {...props} />\n  </MainLayout>\n);\n\nconst withLayoutAndNotifications = Component =>\n  withNotifications(withLayout(Component));\n\nclass App extends PureComponent {\n  componentDidMount() {\n    this.props.dispatch(getUserProfileFromToken());\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.root}>\n        <AppHeader />\n        <Box className={classes.container}>\n          <Switch>\n            <Route path={routes.home} exact component={withNotifications(Auth)} />\n            <Route path={routes.registration} component={withNotifications(Auth)} />\n            <PrivateRoute\n              permissionPath=\"news\"\n              path={routes.news}\n              component={withLayoutAndNotifications(News)}\n            />\n            <PrivateRoute\n              permissionPath=\"chat\"\n              path={routes.chat}\n              component={withLayoutAndNotifications(Chat)}\n            />\n            <PrivateRoute\n              path={routes.profile}\n              component={withLayoutAndNotifications(Profile)}\n            />\n            <PrivateRoute\n              permissionPath=\"settings\"\n              path={routes.adminPanel}\n              component={withLayoutAndNotifications(AdminPanel)}\n            />\n          </Switch>\n        </Box>\n      </div>\n    );\n  }\n}\n\nexport default compose(\n  withStyles(styles),\n  connect()\n)(App);\n","import { red } from '@material-ui/core/colors'\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#63c1a0',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: 'rgba(255, 255, 255, .87)',\n    },\n  },\n});\n\nexport default theme;","import { createStore, compose, applyMiddleware, combineReducers } from 'redux';\nimport thunk from 'redux-thunk';\nimport auth from './auth';\nimport notifications from './notifications';\nimport news from './news';\nimport adminPanel from './adminPanel';\nimport chat from './chat';\n\nconst rootReducer = combineReducers({\n  auth,\n  notifications,\n  news,\n  adminPanel,\n  chat\n});\n\nconst createAppStore = () => {\n  const store = createStore(\n    rootReducer,\n    compose(\n      applyMiddleware(thunk),\n      window.__REDUX_DEVTOOLS_EXTENSION__ ? window.__REDUX_DEVTOOLS_EXTENSION__() : noop => noop\n    )\n  );\n\n  return store;\n};\n\nexport default createAppStore;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { CssBaseline } from '@material-ui/core';\nimport { ThemeProvider } from '@material-ui/styles';\nimport theme from './theme';\nimport createAppStore from './store';\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <CssBaseline />\n    <Provider store={createAppStore()}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}